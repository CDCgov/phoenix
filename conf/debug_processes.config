profiles {
    debug_procs {
        // Enable process debugging
        process {
            // Add debug information to all processes
            afterScript = '''
            echo "==== POST PROCESS DEBUG ===="
            echo "Process: ${workflow.manifest.name}:${task.process}"
            echo "Task name: ${task.process} (${task.tag ?: 'no-tag'})"
            echo "Work dir: ${task.workDir}"
            echo "Publish dir: ${task.publishDir}"
            echo "CPUs: ${task.cpus}"
            echo "Memory: ${task.memory}"
            echo "Time: ${task.time}"
            echo "Container: ${task.container}"
            echo "launchDir: ${workflow.launchDir}"
            echo "params.input: ${params.input}"
            echo "params.input_sra: ${params.input_sra}"
            echo "params.indir: ${params.indir}"
            echo "params.pipeline_upper: ${params.pipeline_upper}"
            echo "params.outdir: ${params.outdir}"
            echo "meta.id: ${meta.id}"
            echo "meta.project_id: ${meta.project_id}"
            echo "meta.full_project_id: ${meta.full_project_id}}"
            echo "==== PROCESS COMPLETED ===="
            echo "Exit status: ${task.exitStatus}"
            echo "Duration: ${task.duration}"
            echo "Real time: ${task.realtime}"
            echo "Peak memory: ${task.peak_rss}"
            echo "Peak virtual memory: ${task.peak_vmem}"
            echo "============================"
            '''
        }
    }
}